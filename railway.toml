# Railway Configuration
# This file tells Railway how to build and deploy the application

[build]
# Use pnpm for package management
builder = "NIXPACKS"

[build.nixpacksPlan]
# Install pnpm before building
providers = ["node"]

[build.nixpacksConfig]
# Use Node.js 20
nodeVersion = "20"

[deploy]
# Start command
startCommand = "pnpm start"
# Health check path
healthcheckPath = "/"
# Restart policy on failure
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Build command
[build]
buildCommand = "pnpm install && pnpm run build"

# Environment variables that should be available during build
# Note: VITE_ANALYTICS_ENDPOINT is NOT required and has been removed
[build.environment]
NODE_ENV = "production"
